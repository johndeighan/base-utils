{
  "version": 3,
  "file": "base-build.js",
  "sourceRoot": "..\\",
  "sources": [
    "src\\base-build.coffee"
  ],
  "names": [],
  "mappings": "AAQkD;;;;;;;;;AAAA,IAAA,OAAA,EAAA,QAAA,EAAA,CAAA,EAAA,GAAA,EAAA;;AAElD,OAAA;EAAQ,QAAR;CAAA,MAAA;;AACA,OAAO,EAAP,MAAA;;AACA,OAAA;EAAQ,QAAR;CAAA,MAAA,OAJkD;;;;;AAUlD,OAAA,IAAO,OAAA,GAAU,CAAC,OAAD,CAAA,GAAA;AAEjB,MAAA;AAAC;IACC,QAAA,CAAS,OAAT,EAAkB;MACjB,QAAA,EAAU,MADO;MAEjB,WAAA,EAAa;IAFI,CAAlB,EADD;GAKA,aAAA;IAAM;IACL,OAAO,CAAC,GAAR,CAAY,CAAA,gBAAA,CAAA,CAAmB,OAAnB,CAAA,QAAA,CAAZ;IACA,OAAO,CAAC,IAAR,CAAA,EAFD;;AAPgB,EAViC;;;AAwBlD,OAAA,IAAO,OAAA,GAAU,CAAC,IAAD,EAAO,MAAP,CAAA,GAAA;AAEjB,MAAA,CAAA,EAAA,QAAA,EAAA;EAAC,IAAG,MAAM,CAAC,OAAP,CAAe,GAAf,CAAA,KAAuB,CAA1B;IACC,MAAA,GAAS,GAAA,GAAM,OADhB;;EAGA,IAAG,QAAA,GAAW,IAAI,CAAC,KAAL,CAAW,gBAAX,CAAd;IACC,CAAC,CAAD,EAAI,GAAJ,CAAA,GAAW;AACX,WAAO,GAAA,GAAM,OAFd;;EAGA,OAAO,CAAC,GAAR,CAAY,CAAA,WAAA,CAAA,CAAc,IAAd,CAAA,CAAA,CAAZ;SACA,OAAO,CAAC,IAAR,CAAA;AATgB,EAxBiC;;;AAqClD,OAAA,IAAO,mBAAA,GAAsB,CAAC,OAAD,EAAA,GAAU,UAAV,CAAA,GAAA;AAE7B,MAAA,WAAA,EAAA,QAAA,EAAA,CAAA,EAAA,GAAA,EAAA;EAAC,KAAA,4CAAA;;IACC,IAAG,CAAE,EAAE,CAAC,UAAH,CAAc,QAAd,CAAL;AACC,aAAO,MADR;;IAEA,UAAA,GAAa,EAAE,CAAC,QAAH,CAAY,OAAZ,CAAoB,CAAC;IAClC,WAAA,GAAc,EAAE,CAAC,QAAH,CAAY,QAAZ,CAAqB,CAAC;IACpC,IAAI,WAAA,GAAc,UAAlB;AACC,aAAO,MADR;;EALD;AAOA,SAAO;AATqB,EArCqB;;;AAkDlD,OAAA,GAAU,CAAC,QAAD,CAAA,GAAA;AAEV,MAAA,MAAA,EAAA;EAAC,MAAA,GAAS,OAAA,CAAQ,QAAR,EAAkB,KAAlB;EACT,OAAA,GAAU,OAAA,CAAQ,QAAR,EAAkB,SAAlB;EACV,IAAG,mBAAA,CAAoB,QAApB,EAA8B,MAA9B,EAAsC,OAAtC,CAAH;AACC,WADD;;EAEA,OAAO,CAAC,GAAR,CAAY,QAAQ,CAAC,UAAT,CAAoB,IAApB,EAA0B,GAA1B,CAAZ;EACA,OAAA,CAAQ,CAAA,4BAAA,CAAA,CAA+B,QAA/B,CAAA,CAAR;AAPS,EAlDwC;;;AA8DlD,OAAO,CAAC,GAAR,CAAY,kBAAZ;;AAGA;;AAAA,KAAA,qCAAA;;EACC,OAAA,CAAQ,QAAR;AADD,CAjEkD;;;AAqElD,OAAA,CAAQ,gCAAR",
  "sourcesContent": [
    "# base-build.coffee\r\n\r\n# --- build this library\r\n# --- NOTE: If this file is modified or deleted, you must execute:\r\n#           npx coffee -cmb --no-header ./src/base-build.coffee\r\n#           npm run build\r\n# --- We want to run low-level-build.js, however that requires:\r\n#        - libraries must be compiled\r\n#        - low-level-build.coffee must be compiled\r\n\r\nimport {execSync} from 'node:child_process'\r\nimport fs from 'node:fs'\r\nimport {globSync} from 'glob'\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- These 3 functions are duplicates of those in base-utils.coffee\r\n#     however, we can't be sure that has been compiled\r\n\r\nexport execCmd = (cmdLine) =>\r\n\r\n\ttry\r\n\t\texecSync cmdLine, {\r\n\t\t\tencoding: 'utf8'\r\n\t\t\twindowsHide: true\r\n\t\t\t}\r\n\tcatch err\r\n\t\tconsole.log \"ERROR: exec of '#{cmdLine}' failed\"\r\n\t\tprocess.exit()\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport withExt = (path, newExt) =>\r\n\r\n\tif newExt.indexOf('.') != 0\r\n\t\tnewExt = '.' + newExt\r\n\r\n\tif lMatches = path.match(/^(.*)\\.[^\\.]+$/)\r\n\t\t[_, pre] = lMatches\r\n\t\treturn pre + newExt\r\n\tconsole.log \"Bad path: '#{path}'\"\r\n\tprocess.exit()\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport newerDestFilesExist = (srcPath, lDestPaths...) =>\r\n\r\n\tfor destPath in lDestPaths\r\n\t\tif ! fs.existsSync(destPath)\r\n\t\t\treturn false\r\n\t\tsrcModTime = fs.statSync(srcPath).mtimeMs\r\n\t\tdestModTime = fs.statSync(destPath).mtimeMs\r\n\t\tif (destModTime < srcModTime)\r\n\t\t\treturn false\r\n\treturn true\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\ncompile = (filePath) =>\r\n\r\n\tjsPath = withExt(filePath, '.js')\r\n\tmapPath = withExt(filePath, '.js.map')\r\n\tif newerDestFilesExist(filePath, jsPath, mapPath)\r\n\t\treturn\r\n\tconsole.log filePath.replaceAll('\\\\', '/')\r\n\texecCmd \"npx coffee -cmb --no-header #{filePath}\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nconsole.log \"-- base-build --\"\r\n\r\n# --- Compile all *.coffee files in src/lib\r\nfor filePath in globSync('./src/lib/*.coffee')\r\n\tcompile filePath\r\n\r\n# --- Compile low-level-build.coffee\r\ncompile \"src/bin/low-level-build.coffee\"\r\n"
  ]
}