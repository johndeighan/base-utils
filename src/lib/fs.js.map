{
  "version": 3,
  "file": "fs.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\fs.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# fs.coffee\r\n\r\nimport pathLib from 'node:path'\r\nimport urlLib from 'url'\r\nimport fs from 'fs'\r\nimport NReadLines from 'n-readlines'\r\n\r\nimport {\r\n\tundef, defined, nonEmpty, toBlock, toArray, getOptions,\r\n\tisString, isNumber, isHash, isArray, isIterable,\r\n\tfromJSON, toJSON,\r\n\t} from '@jdeighan/base-utils'\r\nimport {assert, croak} from '@jdeighan/base-utils/exceptions'\r\nimport {LOG, LOGVALUE} from '@jdeighan/base-utils/log'\r\nimport {dbgEnter, dbgReturn, dbg} from '@jdeighan/base-utils/debug'\r\nimport {toTAML, fromTAML} from '@jdeighan/base-utils/taml'\r\nimport {\r\n\tmyself, mydir, mkpath,\r\n\tmkDir, touch, isFile, isDir, rename,\r\n\tpathType, rmFile, rmDir, parsePath, parseSource,\r\n\t} from '@jdeighan/base-utils/ll-fs'\r\n\r\nexport {\r\n\tmyself, mydir, mkpath,\r\n\tmkDir, touch, isFile, isDir, rename,\r\n\tpathType, rmFile, rmDir, parsePath, parseSource,\r\n\t}\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport getPkgJsonDir = () =>\r\n\r\n\tpkgJsonDir = undef\r\n\r\n\t# --- First, get the directory this file is in\r\n\tdir = mydir(import.meta.url)\r\n\r\n\t# --- parse into parts\r\n\t{root, lDirs} = parsePath(dir)\r\n\r\n\t# --- search upward for package.json\r\n\twhile (lDirs.length > 0)\r\n\t\tpath = mkpath(root, lDirs, 'package.json')\r\n\t\tif isFile(path)\r\n\t\t\treturn mkpath(root, lDirs)\r\n\t\tlDirs.pop()\r\n\r\n\t\tdir = mkpath('..', dir)\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport getPkgJsonPath = () =>\r\n\r\n\tfilePath = mkpath(process.cwd(), 'package.json')\r\n\tassert isFile(filePath), \"Missing pacakge.json at cur dir\"\r\n\treturn filePath\r\n\r\n# ---------------------------------------------------------------------------\r\n#   slurp - read a file into a string\r\n\r\nexport slurp = (lParts...) =>\r\n\t# --- last argument can be an options hash\r\n\t#     Valid options:\r\n\t#        maxLines: <int>\r\n\r\n\tassert (lParts.length > 0), \"No parameters\"\r\n\tif isHash(lParts[lParts.length - 1])\r\n\t\thOptions = lParts.pop()\r\n\t\tassert (lParts.length > 0), \"Options hash but no parameters\"\r\n\t\t{maxLines} = hOptions\r\n\tfilePath = mkpath(lParts...)\r\n\tif defined(maxLines)\r\n\t\tlLines = []\r\n\r\n\t\treader = new NReadLines(filePath)\r\n\t\tnLines = 0\r\n\r\n\t\twhile (buffer = reader.next()) && (nLines < maxLines)\r\n\t\t\tnLines += 1\r\n\t\t\t# --- text is split on \\n chars,\r\n\t\t\t#     we also need to remove \\r chars\r\n\t\t\tlLines.push buffer.toString().replace(/\\r/g, '')\r\n\t\tcontents = toBlock(lLines)\r\n\telse\r\n\t\tcontents = fs.readFileSync(filePath, 'utf8').toString()\r\n\treturn contents\r\n\r\n# ---------------------------------------------------------------------------\r\n#   slurpJSON - read a file into a hash\r\n\r\nexport slurpJSON = (lParts...) =>\r\n\r\n\treturn fromJSON(slurp(lParts...))\r\n\r\n# ---------------------------------------------------------------------------\r\n#   slurpTAML - read a file into a hash\r\n\r\nexport slurpTAML = (lParts...) =>\r\n\r\n\treturn fromTAML(slurp(lParts...))\r\n\r\n# ---------------------------------------------------------------------------\r\n#   slurpPkgJSON - read package.json into a hash\r\n\r\nexport slurpPkgJSON = (lParts...) =>\r\n\r\n\tif (lParts.length == 0)\r\n\t\tpkgJsonPath = getPkgJsonPath()\r\n\telse\r\n\t\tpkgJsonPath = mkpath(lParts...)\r\n\t\tassert isFile(pkgJsonPath), \"Missing package.json at cur dir\"\r\n\treturn slurpJSON(pkgJsonPath)\r\n\r\n# ---------------------------------------------------------------------------\r\n#   barf - write a string to a file\r\n\r\nexport barf = (text, lParts...) =>\r\n\r\n\tassert (lParts.length > 0), \"Missing file path\"\r\n\tfilePath = mkpath(lParts...)\r\n\tfs.writeFileSync(filePath, text)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n#   barfJSON - write a string to a file\r\n\r\nexport barfJSON = (hJson, lParts...) =>\r\n\r\n\tassert isHash(hJson), \"hJson not a hash\"\r\n\tbarf(toJSON(hJson), lParts...)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n#   barfTAML - write a string to a file\r\n\r\nexport barfTAML = (ds, lParts...) =>\r\n\r\n\tassert isHash(ds) || isArray(ds), \"ds not a hash or array\"\r\n\tbarf(toTAML(ds), lParts...)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n#   barfPkgJSON - write a string to a file\r\n\r\nexport barfPkgJSON = (hJson, lParts...) =>\r\n\r\n\tif (lParts.length == 0)\r\n\t\tpkgJsonPath = getPkgJsonPath()\r\n\telse\r\n\t\tpkgJsonPath = mkpath(lParts...)\r\n\t\tassert isFile(pkgJsonPath), \"Missing package.json at cur dir\"\r\n\tbarfJSON(hJson, pkgJsonPath)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport getTextFileContents = (filePath) =>\r\n\t# --- handles metadata if present\r\n\r\n\tdbgEnter 'getTextFileContents', filePath\r\n\tlMetaLines = undef\r\n\tinMeta = false\r\n\r\n\tlLines = []\r\n\r\n\tnumLines = 0\r\n\tfor line from allLinesIn(filePath)\r\n\t\tif (numLines == 0) && (line == '---')\r\n\t\t\tlMetaLines = ['---']\r\n\t\t\tinMeta = true\r\n\t\telse if inMeta\r\n\t\t\tif (line == '---')\r\n\t\t\t\tinMeta = false\r\n\t\t\telse\r\n\t\t\t\tlMetaLines.push line\r\n\t\telse\r\n\t\t\tlLines.push line\r\n\t\tnumLines += 1\r\n\r\n\tif defined(lMetaLines)\r\n\t\tmetadata = fromTAML(toBlock(lMetaLines))\r\n\telse\r\n\t\tmetadata = undef\r\n\thResult = {\r\n\t\tmetadata\r\n\t\tlLines\r\n\t\t}\r\n\tdbgReturn 'getTextFileContents', hResult\r\n\treturn hResult\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport allFilesIn = (dir, hOptions={}) ->\r\n\t# --- yields hFileInfo with keys:\r\n\t#        filePath, fileName, stub, ext, metadata, contents\r\n\t# --- dir must be a directory\r\n\t# --- Valid options:\r\n\t#        recursive - descend into subdirectories\r\n\t#        eager - read the file and add keys metadata, contents\r\n\r\n\tdbgEnter 'allFilesIn', dir, hOptions\r\n\t{recursive, eager} = getOptions(hOptions, {\r\n\t\trecursive: true\r\n\t\teager: false\r\n\t\t})\r\n\tassert isDir(dir), \"Not a directory: #{dir}\"\r\n\thOptions = {withFileTypes: true, recursive}\r\n\tfor ent in fs.readdirSync(dir, hOptions)\r\n\t\tdbg \"ENT:\", ent\r\n\t\tif ent.isFile()\r\n\t\t\tpath = mkpath(ent.path, ent.name)\r\n\t\t\tdbg \"PATH = #{path}\"\r\n\t\t\thFileInfo = parseSource(path)\r\n\t\t\tassert defined(hFileInfo), \"allFilesIn(): hFileInfo = undef\"\r\n\t\t\tif eager\r\n\t\t\t\thContents = getTextFileContents(hFileInfo.filePath)\r\n\t\t\t\tObject.assign hFileInfo, hContents\r\n\t\t\tdbg 'hFileInfo', hFileInfo\r\n\t\t\tyield hFileInfo\r\n\tdbgReturn 'allFilesIn'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport allLinesIn = (filePath) ->\r\n\r\n\treader = new NReadLines(filePath)\r\n\twhile (buffer = reader.next())\r\n\t\tyield buffer.toString().replace(/\\r/g, '')\r\n\treturn\r\n\r\nexport lineIterator = allLinesIn     # for backward compatibility\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport forEachFileInDir = (dir, func, hContext={}) =>\r\n\t# --- callback will get parms (filePath, hContext)\r\n\t#     DOES NOT RECURSE INTO SUBDIRECTORIES\r\n\r\n\tfor ent in fs.readdirSync(dir, {withFileTypes: true})\r\n\t\tif ent.isFile()\r\n\t\t\tfunc(ent.name, dir, hContext)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport forEachItem = (iter, func, hContext={}) =>\r\n\t# --- func() gets (item, hContext)\r\n\r\n\tassert isIterable(iter), \"not an iterable\"\r\n\tlItems = []\r\n\tindex = 0\r\n\tfor item from iter\r\n\t\thContext.index = index\r\n\t\tindex += 1\r\n\t\ttry\r\n\t\t\tresult = func(item, hContext)\r\n\t\t\tif defined(result)\r\n\t\t\t\tlItems.push result\r\n\t\tcatch err\r\n\t\t\treader.close()\r\n\t\t\tif isString(err)\r\n\t\t\t\treturn lItems\r\n\t\t\telse\r\n\t\t\t\tthrow err    # rethrow the error\r\n\treturn lItems\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport forEachLineInFile = (filePath, func, hContext={}) =>\r\n\t# --- func gets (line, hContext) - lineNum starts at 1\r\n\t#     hContext will include keys:\r\n\t#        filePath\r\n\t#        lineNum - first line is line 1\r\n\r\n\tlinefunc = (line, hContext) =>\r\n\t\thContext.filePath = filePath\r\n\t\thContext.lineNum = hContext.index + 1\r\n\t\treturn func(line, hContext)\r\n\r\n\treturn forEachItem(allLinesIn(filePath), linefunc, hContext)\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport class FileWriter\r\n\r\n\tconstructor: (@filePath) ->\r\n\r\n\t\tassert isString(@filePath), \"Not a string: #{@filePath}\"\r\n\t\t@writer = fs.createWriteStream(@filePath)\r\n\r\n\tDESTROY: () ->\r\n\r\n\t\tif defined(@writer)\r\n\t\t\t@end()\r\n\t\treturn\r\n\r\n\twrite: (lStrings...) ->\r\n\r\n\t\tassert defined(@writer), \"Write after end()\"\r\n\t\tfor str in lStrings\r\n\t\t\tassert isString(str), \"Not a string: '#{str}'\"\r\n\t\t\t@writer.write str\r\n\t\treturn\r\n\r\n\twriteln: (lStrings...) ->\r\n\r\n\t\tassert defined(@writer), \"Write after end()\"\r\n\t\tfor str in lStrings\r\n\t\t\tassert isString(str), \"Not a string: '#{str}'\"\r\n\t\t\t@writer.write str\r\n\t\t\t@writer.write \"\\n\"\r\n\t\treturn\r\n\r\n\tend: () ->\r\n\r\n\t\t@writer.end()\r\n\t\t@writer = undef\r\n\t\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport class FileWriterSync\r\n\r\n\tconstructor: (@filePath) ->\r\n\r\n\t\tassert isString(@filePath), \"Not a string: #{@filePath}\"\r\n\t\t@fullPath = mkpath(@filePath)\r\n\t\tassert isString(@fullPath), \"Bad path: #{@filePath}\"\r\n\t\t@fd = fs.openSync(@fullPath, 'w')\r\n\r\n\tDESTROY: () ->\r\n\r\n\t\tif defined(@fd)\r\n\t\t\t@end()\r\n\t\treturn\r\n\r\n\twrite: (lStrings...) ->\r\n\r\n\t\tassert defined(@fd), \"Write after end()\"\r\n\t\tfor str in lStrings\r\n\t\t\tif isNumber(str)\r\n\t\t\t\tfs.writeSync @fd, str.toString()\r\n\t\t\telse\r\n\t\t\t\tassert isString(str), \"Not a string: '#{str}'\"\r\n\t\t\t\tfs.writeSync @fd, str\r\n\t\treturn\r\n\r\n\twriteln: (lStrings...) ->\r\n\r\n\t\t@write lStrings...\r\n\t\t@write \"\\n\"\r\n\t\treturn\r\n\r\n\tend: () ->\r\n\r\n\t\tfs.closeSync(@fd)\r\n\t\t@fd = undef\r\n\t\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport class FileProcessor\r\n\r\n\tconstructor: (@path, hOptions={}) ->\r\n\t\t# --- path can be a file or directory\r\n\t\t# --- Valid options:\r\n\t\t#        debug\r\n\t\t#        recursive\r\n\r\n\t\tassert isString(@path), \"path not a string\"\r\n\r\n\t\t# --- determine type of path\r\n\t\t@pathType = pathType @path\r\n\t\tassert (@pathType == 'dir') || (@pathType == 'file'),\r\n\t\t\t\"path type #{@pathType} must be dir or file\"\r\n\r\n\t\t# --- convert path to a full path\r\n\t\t@path = mkpath @path\r\n\r\n\t\t@hOptions = getOptions(hOptions)\r\n\t\t@debug = !! @hOptions.debug\r\n\t\t@recursive = !!@hOptions.recursive\r\n\t\t@log \"constructed\"\r\n\r\n\t# ..........................................................\r\n\r\n\tlog: (obj) ->\r\n\r\n\t\tif @debug\r\n\t\t\tif isString(obj)\r\n\t\t\t\tconsole.log \"DEBUG: #{obj}\"\r\n\t\t\telse\r\n\t\t\t\tconsole.log obj\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\t# --- called at beginning of @go()\r\n\r\n\tbegin: () ->\r\n\r\n\t\t@log \"begin() called\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\t# --- called at end of @go()\r\n\r\n\tend: () ->\r\n\r\n\t\t@log \"end() called\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tfilter: (hFileInfo) ->\r\n\r\n\t\treturn true    # by default, handle all files in dir\r\n\r\n\t# ..........................................................\r\n\r\n\tprocAll: () ->\r\n\r\n\t\t@begin()\r\n\t\tcount = 0\r\n\r\n\t\tif (@pathType == 'file')\r\n\t\t\thFileInfo = parseSource(@path)\r\n\t\t\tname = hFileInfo.fileName\r\n\t\t\tcount = 1\r\n\t\t\t@log \"[#{count}] #{name} - Handle\"\r\n\t\t\t@handleFile hFileInfo\r\n\t\telse\r\n\t\t\t@log \"process all files in '#{@path}'\"\r\n\t\t\thOpt = {recursive: @recursive}\r\n\t\t\tfor hFileInfo from allFilesIn(@path, hOpt)\r\n\t\t\t\tname = hFileInfo.fileName\r\n\t\t\t\tcount += 1\r\n\t\t\t\tif @filter(hFileInfo)\r\n\t\t\t\t\t@log \"[#{count}] #{name} - Handle\"\r\n\t\t\t\t\t@handleFile hFileInfo\r\n\t\t\t\telse\r\n\t\t\t\t\t@log \"[#{count}] #{name} - Skip\"\r\n\t\t@log \"#{count} files processed\"\r\n\t\t@end()\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\t# --- synonum for @procAll()\r\n\r\n\tgo: () ->\r\n\r\n\t\t@procAll()\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tbeginFile: (hFileInfo) ->\r\n\r\n\t\treturn    # by default, does nothing\r\n\r\n\t# ..........................................................\r\n\r\n\tprocFile: (hFileInfo) ->\r\n\r\n\t\tassert defined(hFileInfo), \"procFile(): hFileInfo = undef\"\r\n\t\tlineNum = 1\r\n\t\tfor line from allLinesIn(hFileInfo.filePath)\r\n\t\t\tresult = @handleLine(line, lineNum, hFileInfo)\r\n\t\t\tswitch result\r\n\t\t\t\twhen 'abort'\r\n\t\t\t\t\treturn\r\n\t\t\tlineNum += 1\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tendFile: (hFileInfo) ->\r\n\r\n\t\treturn   # by default, does nothing\r\n\r\n\t# ..........................................................\r\n\t# --- default handleFile() calls handleLine() for each line\r\n\r\n\thandleFile: (hFileInfo) ->\r\n\r\n\t\t@beginFile hFileInfo\r\n\t\t@procFile hFileInfo\r\n\t\t@endFile hFileInfo\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\thandleLine: (line, lineNum, hFileInfo) ->\r\n\r\n\t\treturn   # by default, does nothing\r\n"
  ]
}