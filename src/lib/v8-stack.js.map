{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "src\\lib\\v8-stack.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# v8-stack.coffee\n\nimport pathLib from 'node:path'\nimport fs from 'fs'\n\nimport {\n\tundef, defined, notdefined, alldefined, isEmpty, nonEmpty,\n\tassert, croak, isInteger, hasKey,\n\tOL, isIdentifier, isFunctionName, getOptions,\n\t} from '@jdeighan/base-utils'\nimport {\n\tmydir, mkpath, fileExt, withExt,\n\t} from '@jdeighan/base-utils/ll-fs'\nimport {mapSourcePos} from '@jdeighan/base-utils/source-map'\nimport {toNICE} from '@jdeighan/base-utils/to-nice'\n\nexport internalDebugging = false\ndir = mydir(import.meta.url)    # directory this file is in\n\n# ---------------------------------------------------------------------------\n# Stack Frames have the keys:\n#    type - eval | native | constructor | method | function | script\n#    filePath\n#    fileName\n#    ext\n#    functionName\n#    objTye, methodName - if type == 'method'\n#    isAsync - true if an async function/method\n#    line\n#    column\n\n# ---------------------------------------------------------------------------\n\nexport nodeStr = (hNode) =>\n\n\t{type, fileName, line, column} = hNode\n\treturn \"#{type} at #{fileName}:#{line}:#{column}\"\n\n# ---------------------------------------------------------------------------\n# --- export only for unit tests\n\nexport extractFileName = (filePath) =>\n\n\tif lMatches = filePath.match(/// [\\/\\\\] ([^\\/\\\\]+) $///)\n\t\treturn lMatches[1]\n\telse\n\t\treturn filePath\n\n# ---------------------------------------------------------------------------\n\nexport getV8Stack = (hOptions={}) =>\n\t# --- ignores any stack frames from this module\n\t#     *.js files will be mapped to *.coffee files\n\t#        if a source map is available\n\n\tdebug = hOptions.debug || false\n\n\ttry\n\t\toldLimit = Error.stackTraceLimit\n\t\toldPreparer = Error.prepareStackTrace\n\n\t\tError.stackTraceLimit = Infinity\n\t\tError.prepareStackTrace = (error, lCallSites) =>\n\t\t\tlFrames = []\n\t\t\tfor oSite in lCallSites\n\t\t\t\tfileURL = oSite.getFileName()\n\t\t\t\tif defined(fileURL)\n\t\t\t\t\thParsed = parseFileURL(fileURL)\n\t\t\t\t\tfilePath = hParsed.source\n\n\t\t\t\tif (typeof filePath == 'string') && (filePath.length > 0)\n\t\t\t\t\t# --- Ignore any stack entries from this module\n\t\t\t\t\tpos = filePath.indexOf('v8-stack.js')\n\t\t\t\t\tif (pos >= 0)\n\t\t\t\t\t\tif debug\n\t\t\t\t\t\t\tconsole.log \"SKIP: filePath = '#{filePath}'\"\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tobjType = oSite.getTypeName()\n\t\t\t\tthisVal = oSite.getThis()\n\t\t\t\tfunctionName = oSite.getFunctionName()\n\t\t\t\tmethodName = oSite.getMethodName()\n\t\t\t\tline = oSite.getLineNumber()\n\t\t\t\tcolumn = oSite.getColumnNumber()\n\n\t\t\t\t# --- Set type\n\t\t\t\tif oSite.isEval()\n\t\t\t\t\ttype ='eval'\n\t\t\t\telse if oSite.isNative()\n\t\t\t\t\ttype = 'native'\n\t\t\t\telse if oSite.isConstructor()\n\t\t\t\t\ttype = 'constructor'\n\t\t\t\telse if defined(methodName)\n\t\t\t\t\ttype = 'method'\n\t\t\t\telse\n\t\t\t\t\ttype = 'function'\n\n\t\t\t\tif debug\n\t\t\t\t\tconsole.log '-'.repeat(40)\n\t\t\t\t\tconsole.log \"type = '#{type}'\"\n\t\t\t\t\tconsole.log \"objType = '#{objType}'\"\n\t\t\t\t\tconsole.log \"filePath = '#{filePath}'\"\n\t\t\t\t\tconsole.log \"functionName = '#{functionName}'\"\n\t\t\t\t\tconsole.log \"methodName = '#{methodName}'\"\n\t\t\t\t\tconsole.log \"at #{line}:#{column}\"\n\n\t\t\t\t# --- Ignore this entry and any before it\n\t\t\t\tif (objType == 'ModuleJob')\n\t\t\t\t\tbreak\n\n\t\t\t\t{dir, name: stub, ext} = pathLib.parse(filePath)\n\t\t\t\thFrame = {\n\t\t\t\t\ttype\n\t\t\t\t\tfilePath\n\t\t\t\t\tfileName: extractFileName(filePath)\n\t\t\t\t\tdir\n\t\t\t\t\tstub\n\t\t\t\t\text\n\t\t\t\t\tfunctionName\n\t\t\t\t\tline\n\t\t\t\t\tcolumn\n\t\t\t\t\tisAsync: oSite.isAsync()\n\t\t\t\t\t}\n\n\t\t\t\tif (type == 'method')\n\t\t\t\t\thFrame.objType = objType\n\t\t\t\t\thFrame.methodName = methodName\n\n\t\t\t\t# --- If main body of a script, stop here\n\t\t\t\tif (type == 'function') && notdefined(functionName)\n\t\t\t\t\thFrame.type = 'script'\n\t\t\t\t\tdelete hFrame.functionName\n\t\t\t\t\tif (hFrame.ext == '.js')\n\t\t\t\t\t\tmapJStoCoffee(hFrame)\n\t\t\t\t\tlFrames.push hFrame\n\t\t\t\t\tbreak\n\n\t\t\t\tif (ext == '.js')\n\t\t\t\t\tmapJStoCoffee(hFrame)\n\t\t\t\tlFrames.push hFrame\n\n\t\t\treturn lFrames\n\n\t\terrObj = new Error()\n\t\tlStackFrames = errObj.stack\n\t\tassert (lStackFrames.length > 0), \"lStackFrames is empty!\"\n\n\t\t# --- reset to previous values\n\t\tError.stackTraceLimit = oldLimit\n\t\tError.prepareStackTrace = oldPreparer\n\tcatch e\n\t\treturn []\n\treturn lStackFrames\n\n# ---------------------------------------------------------------------------\n# --- hFrame contains keys:\n#        filePath\n#        ext\n#        line\n#        column\n\nexport mapJStoCoffee = (hFrame) =>\n\n\t# --- Attempt to convert to original coffee file\n\tassert hasKey(hFrame, 'filePath')\n\tassert hasKey(hFrame, 'fileName')\n\tassert hasKey(hFrame, 'ext')\n\tassert hasKey(hFrame, 'line')\n\tassert hasKey(hFrame, 'column')\n\n\t{filePath, ext, line, column} = hFrame\n\tassert (ext == '.js'), \"ext = #{ext}\"\n\n\thInfo = mapSourcePos filePath, line, column\n\tif defined(hInfo.source)\n\t\t# --- successfully mapped\n\n\t\thFrame.filePath = withExt(hFrame.filePath, '.coffee')\n\t\thFrame.fileName = withExt(hFrame.fileName, '.coffee')\n\t\thFrame.ext = '.coffee'\n\t\thFrame.line = hInfo.line\n\t\thFrame.column = hInfo.column\n\t\thFrame.source = hInfo.source\n\treturn\n\n# ---------------------------------------------------------------------------\n\nexport parseFileURL = (url) =>\n\n\tassert defined(url), \"url is undef in parseFileURL()\"\n\tlMatches = url.match(///^\n\t\t\tfile : \\/\\/\n\t\t\t(.*)\n\t\t\t$///)\n\tif defined(lMatches)\n\t\t[_, pathStr] = lMatches\n\t\t{dir, base:fileName, name:stub, ext} = pathLib.parse(pathStr)\n\t\tif defined(dir) && (dir.indexOf('/') == 0)\n\t\t\tdir = dir.substr(1)   # --- strip leading '/'\n\t\treturn {\n\t\t\tdir\n\t\t\tfileName\n\t\t\tsource: \"#{dir}/#{fileName}\"\n\t\t\tstub\n\t\t\text\n\t\t\t}\n\telse\n\t\tlMatches = url.match(///^\n\t\t\t\tnode : internal \\/\n\t\t\t\t(.*)\n\t\t\t\t$///)\n\t\tif defined(lMatches)\n\t\t\thParsed = {\n\t\t\t\tsource: 'node'\n\t\t\t\t}\n\t\telse\n\t\t\tcroak \"Invalid file url: '#{url}'\"\n\treturn hParsed\n\n# ---------------------------------------------------------------------------\n\nexport getMyOutsideCaller = () =>\n\t# --- Returned object has keys:\n\t#        type - eval | native | constructor | method | function\n\t#        functionName\n\t#        objType, methodName - if a method\n\t#        line\n\t#        column\n\t#        isAsync - if an async function\n\n\ttry\n\t\tlStack = getV8Stack()\n\tcatch err\n\t\tconsole.log \"ERROR in getV8Stack(): #{err.message}\"\n\t\treturn undef\n\n\tfileName = undef\n\tfor hNode,i in lStack\n\t\tif (fileName == undef)\n\t\t\tfileName = hNode.fileName\n\t\telse if (hNode.fileName != fileName)\n\t\t\treturn hNode\n\treturn undef\n\n# ---------------------------------------------------------------------------\n\nexport getMyDirectCaller = () =>\n\t# --- Returned object has keys:\n\t#        type - eval | native | constructor | method | function\n\t#        functionName\n\t#        objType, methodName - if a method\n\t#        line\n\t#        column\n\t#        isAsync - if an async function\n\n\ttry\n\t\tlStack = getV8Stack()\n\tcatch err\n\t\tconsole.log \"ERROR in getV8Stack(): #{err.message}\"\n\t\treturn undef\n\n\treturn lStack[1]\n\n# ---------------------------------------------------------------------------\n\nexport debugV8Stack = (flag=true) =>\n\n\tinternalDebugging = flag\n\treturn\n\n# ---------------------------------------------------------------------------\n\nexport isFile = (filePath) =>\n\n\ttry\n\t\tresult = fs.lstatSync(filePath).isFile()\n\t\treturn result\n\tcatch err\n\t\treturn false\n\n# ---------------------------------------------------------------------------\n\nexport getV8StackStr = (hOptions={}) =>\n\n\tlStack = await getV8Stack(hOptions)\n\tlParts = for hNode in lStack\n\t\tnodeStr(hNode)\n\treturn lParts.join(\"\\n\")"
  ]
}