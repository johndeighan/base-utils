{
  "version": 3,
  "file": "cmd-args.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\cmd-args.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# cmd-args.coffee\r\n\r\nimport parseArgs from 'minimist'\r\n\r\nimport {\r\n\tundef, defined, notdefined, isString, isHash, LOG,\r\n\tisArray, isArrayOfStrings,\r\n\thasKey, extractKey, OL,\r\n\t} from '@jdeighan/base-utils'\r\nimport {assert, croak} from '@jdeighan/base-utils/exceptions'\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\ndisplayHelpText = (helpText) =>\r\n\r\n\tif defined(helpText)\r\n\t\tLOG helpText\r\n\telse\r\n\t\tLOG \"No help available\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- By default, throws error if unexpected args are seen\r\n\r\nexport getArgs = (hOptions, lArgs=process.argv.slice(2), helpText=undef) =>\r\n\t# --- hOptions should include keys for types of args\r\n\t#        with value being an array of option keys, e.g.\r\n\t#\r\n\t#        {\r\n\t#           boolean: ['a','b','c','h']\r\n\t#           string: ['name','count']\r\n\t#           default: {\r\n\t#              a: true\r\n\t#              }\r\n\t#           unknown: (opt) =>\r\n\t#              LOG \"Unknown option '#{opt}'\"\r\n\t#           }\r\n\t#\r\n\t#     when invoked with:\r\n\t#        <script> -c --name=abc --count=5 def ghi`\r\n\t#     will return:\r\n\t#        {\r\n\t#           c: true,          # explicitly on cmd line\r\n\t#           a: true,          # default value\r\n\t#           name: 'abc',\r\n\t#           count: 5          # returned as a number\r\n\t#           _: ['def','ghi']  # non-options\r\n\t#           }\r\n\t#\r\n\t#     if lArgs is a string, it's split on whitespace\r\n\t#     hArgs._ contains and array of all non-options\r\n\r\n\tassert isHash(hOptions), \"hOptions must be a hash\"\r\n\r\n\tif hOptions.debug\r\n\t\tLOG 'org hOptions:', hOptions\r\n\r\n\t# --- some keys are unexpected by parseArgs() so we extract them\r\n\tdebug = extractKey(hOptions, 'debug')\r\n\tminNonOptions = extractKey(hOptions, 'minNonOptions')\r\n\tmaxNonOptions = extractKey(hOptions, 'maxNonOptions')\r\n\tlNumbers = extractKey(hOptions, 'number')\r\n\r\n\t# --- Unspecified default values will be added w/value undef\r\n\tif defined(hOptions.default)\r\n\t\tassert isHash(hOptions.default), \"key 'default' must be a hash\"\r\n\t\thDefaultVals = hOptions.default\r\n\telse\r\n\t\thOptions.default = hDefaultVals = {}\r\n\r\n\tif isString(lArgs)\r\n\t\tlArgs = lArgs.trim().split(/\\s+/)\r\n\t\tif debug\r\n\t\t\tLOG lArgs\r\n\telse\r\n\t\tassert isArray(lArgs), \"lArgs must be an array\"\r\n\r\n\t# --- Non-standard key 'numbers' is list of names\r\n\t#     where numbers are expected\r\n\tif defined(lNumbers)\r\n\t\tassert isArrayOfStrings(lNumbers),\r\n\t\t\t\"key 'number' must be an array of strings\"\r\n\t\tif defined(hOptions.string)\r\n\t\t\tassert isArrayOfStrings(hOptions.string),\r\n\t\t\t\t\"key 'string' must be an array\"\r\n\t\t\thOptions.string = [hOptions.string..., lNumbers...]\r\n\t\telse\r\n\t\t\thOptions.string = lNumbers\r\n\r\n\tif defined(hOptions.string)\r\n\t\tassert isArrayOfStrings(hOptions.string),\r\n\t\t\t\"key 'string' must be an array of strings\"\r\n\t\tfor str in hOptions.string\r\n\t\t\tif ! hasKey(hDefaultVals, str)\r\n\t\t\t\thDefaultVals[str] = undef\r\n\r\n\tif defined(hOptions.boolean)\r\n\t\tassert isArrayOfStrings(hOptions.string),\r\n\t\t\t\"key 'string' must be an array of strings\"\r\n\t\tfor str in hOptions.boolean\r\n\t\t\tif ! hasKey(hDefaultVals, str)\r\n\t\t\t\thDefaultVals[str] = undef\r\n\r\n\t# --- If no 'unknown' key in hOptions, add a default one\r\n\tif ! hasKey(hOptions, 'unknown')\r\n\t\thOptions.unknown = (opt) =>\r\n\t\t\tif opt.startsWith('-')\r\n\t\t\t\tdisplayHelpText helpText\r\n\t\t\t\tcroak \"Unknown option '#{opt}'\"\r\n\t\t\treturn\r\n\r\n\thOptions.default = hDefaultVals\r\n\tif debug\r\n\t\tLOG 'final hOptions', hOptions\r\n\r\n\thArgs = parseArgs(lArgs, hOptions)\r\n\tif defined(lNumbers)\r\n\t\tfor key in lNumbers\r\n\t\t\thArgs[key] = parseFloat(hArgs[key])\r\n\tif hArgs.h\r\n\t\tdisplayHelpText helpText\r\n\treturn hArgs\r\n"
  ]
}