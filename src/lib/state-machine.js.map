{
  "version": 3,
  "file": "state-machine.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\state-machine.coffee"
  ],
  "names": [],
  "mappings": "AAAsB;AAAA,IAAA;;AAEtB,OAAA;EACC,KADD;EACQ,OADR;EACiB,UADjB;EAC6B,EAD7B;EAEC,QAFD;EAEW,MAFX;EAEmB,gBAFnB;CAAA,MAAA;;AAIA,OAAA;EAAQ,MAAR;EAAgB,KAAhB;CAAA,MAAA;;AACA,OAAA;EAAQ,QAAR;EAAkB,SAAlB;EAA6B,GAA7B;CAAA,MAAA,6BAPsB;;;;;;AActB,OAAA,IAAa,eAAN,MAAA,aAAA;EAEN,WAAa,MAAA,UAAgB,CAAA,CAAhB,CAAA;IAAC,IAAC,CAAA;IAAO,IAAC,CAAA;IAEtB,QAAA,CAAS,cAAT,EAAyB,IAAC,CAAA,KAA1B,EAAiC,IAAC,CAAA,KAAlC;IACA,MAAA,CAAO,gBAAA,CAAiB,IAAC,CAAA,KAAlB,CAAP,EAAiC,wBAAjC;IACA,MAAA,CAAO,MAAA,CAAO,IAAC,CAAA,KAAR,CAAP,EAAuB,iBAAvB;IACA,SAAA,CAAU,cAAV,EAA0B,IAA1B;EALY,CAAd;;;EASC,OAAS,CAAC,CAAD,CAAA;AAER,WAAQ,IAAC,CAAA,KAAD,KAAU;EAFV,CATV;;;EAeC,QAAU,CAAC,QAAD,EAAW,WAAS,CAAA,CAApB,CAAA;AAEX,QAAA,GAAA,EAAA;IAAE,MAAA,CAAO,MAAA,CAAO,QAAP,CAAP,EAAyB,qBAAzB;IACA,KAAA,eAAA;;;MACC,IAAG,OAAA,CAAQ,GAAR,CAAH;QACC,IAAC,CAAA,KAAK,CAAC,GAAD,CAAN,GAAc,IADf;OAAA,MAAA;QAGC,OAAO,IAAC,CAAA,KAAK,CAAC,GAAD,EAHd;;IADD;IAKA,IAAC,CAAA,KAAD,GAAS;EARA,CAfX;;;EA4BC,WAAa,CAAA,GAAC,OAAD,CAAA;IAEZ,IAAG,CAAE,OAAO,CAAC,QAAR,CAAiB,IAAC,CAAA,KAAlB,CAAL;MACC,IAAG,OAAO,CAAC,MAAR,KAAkB,CAArB;QACC,KAAA,CAAM,CAAA,UAAA,CAAA,CAAa,IAAC,CAAA,KAAd,CAAA,YAAA,CAAA,CAAkC,OAAO,CAAC,CAAD,CAAzC,CAAA,CAAN,EADD;OAAA,MAAA;QAGC,KAAA,CAAM,CAAA,UAAA,CAAA,CAAa,IAAC,CAAA,KAAd,CAAA,mBAAA,CAAA,CAAyC,EAAA,CAAG,OAAH,CAAzC,CAAA,CAAN,EAHD;OADD;;EAFY,CA5Bd;;;EAuCC,aAAe,CAAA,GAAC,SAAD,CAAA;AAEhB,QAAA,CAAA,EAAA,GAAA,EAAA;IAAE,KAAA,2CAAA;;MACC,MAAA,CAAO,OAAA,CAAQ,IAAC,CAAA,KAAK,CAAC,OAAD,CAAd,CAAP,EAAiC,CAAA,CAAA,CAAG,OAAH,CAAA,kBAAA,CAAjC;IADD;EAFc,CAvChB;;;EA+CC,MAAQ,CAAC,OAAD,CAAA;IAEP,IAAC,CAAA,aAAD,CAAe,OAAf;AACA,WAAO,IAAC,CAAA,KAAK,CAAC,OAAD;EAHN,CA/CT;;;EAsDC,MAAQ,CAAC,OAAD,EAAU,KAAV,CAAA;IAEP,IAAC,CAAA,KAAK,CAAC,OAAD,CAAN,GAAkB;EAFX;;AAxDF",
  "sourcesContent": [
    "# state-machine.coffee\r\n\r\nimport {\r\n\tundef, defined, notdefined, OL,\r\n\tisString, isHash, isNonEmptyString,\r\n\t} from '@jdeighan/base-utils'\r\nimport {assert, croak} from '@jdeighan/base-utils/exceptions'\r\nimport {dbgEnter, dbgReturn, dbg} from '@jdeighan/base-utils/debug'\r\n\r\n# ---------------------------------------------------------------------------\r\n# You should override this class, adding methods (uppercase by convention)\r\n#    that expect one or more states and assign a new state\r\n# then only use those methods, not setState() directly\r\n\r\nexport class StateMachine\r\n\r\n\tconstructor: (@state, @hData={}) ->\r\n\r\n\t\tdbgEnter 'StateMachine', @state, @hData\r\n\t\tassert isNonEmptyString(@state), \"not a non-empty string\"\r\n\t\tassert isHash(@hData), \"data not a hash\"\r\n\t\tdbgReturn 'StateMachine', this\r\n\r\n\t# ..........................................................\r\n\r\n\tinState: (x) ->\r\n\r\n\t\treturn (@state == x)\r\n\r\n\t# ..........................................................\r\n\r\n\tsetState: (newState, hNewData={}) ->\r\n\r\n\t\tassert isHash(hNewData), \"new data not a hash\"\r\n\t\tfor own key,val of hNewData\r\n\t\t\tif defined(val)\r\n\t\t\t\t@hData[key] = val\r\n\t\t\telse\r\n\t\t\t\tdelete @hData[key]\r\n\t\t@state = newState\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\texpectState: (lStates...) ->\r\n\r\n\t\tif ! lStates.includes(@state)\r\n\t\t\tif lStates.length == 1\r\n\t\t\t\tcroak \"state is '#{@state}', expected #{lStates[0]}\"\r\n\t\t\telse\r\n\t\t\t\tcroak \"state is '#{@state}', expected one of #{OL(lStates)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\texpectDefined: (lVarNames...) ->\r\n\r\n\t\tfor varname in lVarNames\r\n\t\t\tassert defined(@hData[varname]), \"#{varname} should be defined\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tgetVar: (varname) ->\r\n\r\n\t\t@expectDefined varname\r\n\t\treturn @hData[varname]\r\n\r\n\t# ..........................................................\r\n\r\n\tsetVar: (varname, value) ->\r\n\r\n\t\t@hData[varname] = value\r\n\t\treturn\r\n"
  ]
}