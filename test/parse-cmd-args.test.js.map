{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "test/parse-cmd-args.test.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# parse-cmd-args.test.coffee\n\nimport {\n\tundef, defined, notdefined,\n\t} from '@jdeighan/base-utils'\nimport {LOG} from '@jdeighan/base-utils/log'\nimport {setDebugging} from '@jdeighan/base-utils/debug'\nimport {\n\tparseCmdArgs,\n\t} from '@jdeighan/base-utils/parse-cmd-args'\nimport {UnitTester} from '@jdeighan/base-utils/utest'\n\n# ---------------------------------------------------------------------------\n# --- test parseCmdArgs() without hExpect\n\n(() =>\n\tu = new UnitTester()\n\tu.transformValue = (argStr) =>\n\t\treturn parseCmdArgs({argStr})\n\n\tu.equal '-ab why', {\n\t\ta: true\n\t\tb: true\n\t\t_: ['why']\n\t\t}\n\n\tu.equal '-ab=\"a string\" why not', {\n\t\tab: \"a string\"\n\t\t_: ['why','not']\n\t\t}\n\n\tu.equal '-glob=**/*.coffee', {\n\t\tglob: '**/*.coffee'\n\t\t}\n\n\tu.equal '-glob=\"**/*.coffee\"', {\n\t\tglob: '**/*.coffee'\n\t\t}\n\t)()\n\n# ---------------------------------------------------------------------------\n\n(() =>\n\tu = new UnitTester()\n\tu.transformValue = (argStr) =>\n\t\treturn parseCmdArgs({\n\t\t\targStr\n\t\t\thExpect: {glob: 'string'}\n\t\t\t})\n\n\tu.equal '-glob=**/*.coffee', {\n\t\tglob: '**/*.coffee'\n\t\t}\n\n\tu.equal '-glob=\"**/*.coffee\"', {\n\t\tglob: '**/*.coffee'\n\t\t}\n\t)()\n\n# ---------------------------------------------------------------------------\n# --- test invalid 'hExpect' option\n\n(() =>\n\tu = new UnitTester()\n\n\tu.throws () => parseCmdArgs({\n\t\thExpect: {\n\t\t\tx: 'badtype'\n\t\t\t}\n\t\t})\n\n\tu.throws () => parseCmdArgs({\n\t\thExpect: {\n\t\t\t_: 'non-array'\n\t\t\t}\n\t\t})\n\n\tu.throws () => parseCmdArgs({\n\t\thExpect: {\n\t\t\t_: [3]    # --- should have length 2\n\t\t\t}\n\t\t})\n\n\tu.succeeds () => parseCmdArgs({\n\t\thExpect: {\n\t\t\t_: [undef, undef]    # --- OK\n\t\t\t}\n\t\t})\n\n\tu.throws () => parseCmdArgs({\n\t\thExpect: {\n\t\t\t_: ['a', undef]    # --- non-integer\n\t\t\t}\n\t\t})\n\n\tu.succeeds () => parseCmdArgs({\n\t\thExpect: {\n\t\t\t_: [0, 3]    # --- OK\n\t\t\t}\n\t\t})\n\n\tu.throws () => parseCmdArgs({\n\t\thExpect: {\n\t\t\t_: [3, 2]    # --- min > max\n\t\t\t}\n\t\t})\n\n\tu.succeeds () => parseCmdArgs({\n\t\thExpect: {\n\t\t\t_: [0, 3]                  # --- OK\n\t\t\tdebug: /^full|list|json$/  # --- regexp OK\n\t\t\t}\n\t\t})\n\n\t)()\n\n# ---------------------------------------------------------------------------\n# --- test option 'hExpect'\n\n(() =>\n\thExpect = {\n\t\tf: 'boolean'\n\t\tvv: 'boolean'\n\t\tv: 'boolean'\n\t\tname: 'string'\n\t\tdebug: ///^ full | list | json $///s   # --- a regexp\n\t\ti: 'integer'\n\t\tn: 'number'\n\t\t_: [1, 3]\n\t\t}\n\n\tu = new UnitTester()\n\tu.transformValue = (argStr) =>\n\t\treturn parseCmdArgs({\n\t\t\targStr\n\t\t\thExpect\n\t\t\t})\n\n\tu.equal '-fv why', {\n\t\tf: true\n\t\tv: true\n\t\t_: ['why']\n\t\t}\n\n\tu.equal '-name=\"a string\" nonoption', {\n\t\tname: \"a string\"\n\t\t_: ['nonoption']\n\t\t}\n\n\tu.equal '-f nonoption', {\n\t\tf: true\n\t\t_: ['nonoption']\n\t\t}\n\n\tu.equal '-f=false nonoption', {\n\t\tf: false\n\t\t_: ['nonoption']\n\t\t}\n\n\tu.equal '-f=\"false\" nonoption', {\n\t\tf: false\n\t\t_: ['nonoption']\n\t\t}\n\n\t# --- -vv is taken as 2 flags, flag 'v' is not expected\n\tu.throws () => parseCmdArgs({\n\t\targStr: '-vv nonoption'\n\t\thExpect\n\t\t})\n\n\tu.equal '-vv=false nonoption', {\n\t\tvv: false\n\t\t_: ['nonoption']\n\t\t}\n\n\tu.equal '-vv=\"false\" nonoption', {\n\t\tvv: false\n\t\t_: ['nonoption']\n\t\t}\n\n\t# --- -name must be given a value\n\tu.throws () => parseCmdArgs({\n\t\targStr: '-name nonoption'\n\t\thExpect\n\t\t})\n\n\t# --- but value can be empty\n\tu.equal '-name=\"\" nonoption', {\n\t\tname: ''\n\t\t_: ['nonoption']\n\t\t}\n\n\tu.equal '-name=frog nonoption', {\n\t\tname: 'frog'\n\t\t_: ['nonoption']\n\t\t}\n\n\t# --- there must be at least one non-option\n\tu.throws () => parseCmdArgs({\n\t\targStr: '-f'\n\t\thExpect\n\t\t})\n\n\t# --- there can't be more than 3 non-options\n\tu.throws () => parseCmdArgs({\n\t\targStr: 'a b c d'\n\t\thExpect\n\t\t})\n\n\t# --- set all options\n\tu.equal '-f -vv=false -name=John -i=3 -n=3.5 opt1 opt2 opt3', {\n\t\tf: true\n\t\tvv: false\n\t\tname: 'John'\n\t\ti: 3\n\t\tn: 3.5\n\t\t_: ['opt1','opt2','opt3']\n\t\t}\n\n\t# --- test numeric options\n\tu.throws () => parseCmdArgs({\n\t\targStr: 'slip -i=abc'\n\t\thExpect\n\t\t})\n\n\t# --- test numeric options\n\tu.throws () => parseCmdArgs({\n\t\targStr: 'slip -i=3.5'\n\t\thExpect\n\t\t})\n\n\t# --- test numeric options\n\tu.throws () => parseCmdArgs({\n\t\targStr: 'slip -n=abc'\n\t\thExpect\n\t\t})\n\n\t# --- test regexp\n\tu.succeeds () => parseCmdArgs({\n\t\targStr: 'nonoption -debug=json'\n\t\thExpect\n\t\t})\n\n\t# --- test regexp\n\tu.succeeds () => parseCmdArgs({\n\t\targStr: 'nonoption -debug=full'\n\t\thExpect\n\t\t})\n\n\t# --- test regexp\n\tu.throws () => parseCmdArgs({\n\t\targStr: 'nonoption -debug=abc'\n\t\thExpect\n\t\t})\n\n\t# --- test regexp\n\tu.throws () => parseCmdArgs({\n\t\targStr: 'nonoption -debug=\" full\"'\n\t\thExpect\n\t\t})\n\n\t)()\n\n# ---------------------------------------------------------------------------\n# --- test quoted non-options:\n\n(() =>\n\n\thResult = parseCmdArgs({\n\t\targStr: ' -m \"coffee -c $file\" '\n\t\thExpect: {\n\t\t\t_: [1,1]      # the command to run\n\t\t\tm: 'boolean'\n\t\t\tdir: 'string'\n\t\t\tpattern: 'string'\n\t\t\t}\n\t\t})\n\n\tu = new UnitTester()\n\tu.equal hResult, {\n\t\t_: [\"coffee -c $file\"]\n\t\tm: true\n\t\t}\n\n\t)()\n\n# ---------------------------------------------------------------------------\n# --- test JSON array:\n\n(() =>\n\n\thResult = parseCmdArgs({\n\t\targStr: ' -m -option=\\'[\"a\",\"b\"]\\' '\n\t\thExpect: {\n\t\t\t_: [0,0]      # no non-options\n\t\t\tm: 'boolean'\n\t\t\toption: 'json'\n\t\t\t}\n\t\t})\n\n\tu = new UnitTester()\n\tu.equal hResult, {\n\t\tm: true\n\t\toption: ['a','b']\n\t\t}\n\n\t)()\n\n# ---------------------------------------------------------------------------\n# --- test JSON hash:\n\n(() =>\n\n\thResult = parseCmdArgs({\n\t\targStr: ' -option=\\'{\"a\":1, \"b\":2}\\' '\n\t\thExpect: {\n\t\t\t_: [0,0]      # no non-options\n\t\t\tm: 'boolean'\n\t\t\toption: 'json'\n\t\t\t}\n\t\t})\n\n\tu = new UnitTester()\n\tu.equal hResult, {\n\t\toption: {a:1, b:2}\n\t\t}\n\n\t)()"
  ]
}